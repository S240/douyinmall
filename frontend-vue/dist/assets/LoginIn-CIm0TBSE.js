/* empty css                      */import{_ as m,a as p}from"./Header.vue_vue_type_script_setup_true_lang-D5gxgl6I.js";import{_ as c,a as u,o as f,b as h,d as s,r as g,w as b,e as a,v as n,f as l,F as w,u as v}from"./index-WsWNOFqn.js";v();const y={data(){return{email:"",password:"",redirect:null}},components:{Header:m},created(){this.redirect=this.$route.query.redirect,console.log("this.redirect",this.redirect)},methods:{async handleLogin(){try{const t=await this.$axios.post("/auth/login",{email:this.email,password:this.password});t.code==200?(this.$message({message:"登录成功！",type:"success",duration:1500}),p.set("token",t.token),console.log("this.redirect",this.redirect),this.$router.push(this.redirect||"/")):this.$message({message:"登录失败！",type:"error",duration:1500})}catch(t){console.error("登录失败",t)}}}},_={class:"d-flex justify-content-center align-items-center",style:{height:"50vh"}},x={class:"col-4"},V={class:"mb-3"},k={class:"mb-3"};function L(t,e,$,B,r,i){const d=g("Header");return f(),u(w,null,[h(d),s("div",_,[s("div",x,[s("form",{onSubmit:e[2]||(e[2]=b((...o)=>i.handleLogin&&i.handleLogin(...o),["prevent"]))},[s("div",V,[e[3]||(e[3]=s("label",{for:"email",class:"form-label"},"邮件",-1)),a(s("input",{type:"email",class:"form-control",id:"email",name:"email","onUpdate:modelValue":e[0]||(e[0]=o=>r.email=o)},null,512),[[n,r.email]])]),s("div",k,[e[4]||(e[4]=s("label",{for:"password",class:"form-label"},"密码",-1)),a(s("input",{type:"password",class:"form-control",id:"password",name:"password","onUpdate:modelValue":e[1]||(e[1]=o=>r.password=o)},null,512),[[n,r.password]])]),e[5]||(e[5]=s("div",{class:"mb-3"},[l(" 如果没有账户, 点击这里 "),s("a",{href:"/sign-up"},"注册"),l(". ")],-1)),e[6]||(e[6]=s("button",{type:"submit",class:"btn btn-primary"},"登录",-1))],32)])])],64)}const M=c(y,[["render",L]]);export{M as default};
